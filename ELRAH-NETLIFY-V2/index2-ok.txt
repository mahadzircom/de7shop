<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tempah Baju Melayu Elrah Exclusive 2026 | Koleksi Raya DE7SHOP</title>
<meta name="description" content="Tempah online Koleksi Raya 2026 Elrah Exclusive (Daytona, Diablo, Kanak-kanak) di DE7SHOP. Mudah, cepat, dan terus ke WhatsApp. Dapatkan voucher diskaun terkini di sini!">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<style>
body{font-family:'Poppins',sans-serif;background:#e9f5e6;padding:20px;margin:0;}
header.main-header{text-align:center;padding:25px 15px;background:linear-gradient(135deg,#0b5328,#0f6b32);color:#f7d87c;border-radius:14px;margin-bottom:25px;box-shadow:0 4px 10px rgba(0,0,0,0.15);}
header.main-header h1{font-family:'Playfair Display', serif;font-size:26px;margin:0;letter-spacing:1px;text-shadow:0 3px 6px rgba(0,0,0,0.3);}
header.main-header p{margin-top:6px;font-size:14px;color:#fff7d1;}
section.card{background:#fff;padding:15px;margin-bottom:28px;border-radius:12px;border:2px solid #c9e8c1;box-shadow:0 3px 8px rgba(0,0,0,0.08);}
section.card h3{margin-top:0;}
.btn-add{background:#0f6b32;color:white;padding:11px;border:none;border-radius:8px;width:100%;cursor:pointer;margin-top:12px;margin-bottom:18px;font-weight:bold;transition:.25s;}
.btn-add:hover{background:#137f3b;box-shadow:0 4px 8px rgba(0,0,0,0.2);}
select,input{width:100%;padding:12px;margin-top:8px;border-radius:10px;font-size:15px;border:2px solid #d8f2d2;box-sizing:border-box;}
.popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.7);width:300px;background:white;padding:25px;border-radius:20px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.25);opacity:0;pointer-events:none;transition:.35s ease;z-index:1000;}
.popup.show{opacity:1;pointer-events:auto;transform:translate(-50%,-50%) scale(1);}
.popup h3{margin:0;color:#0f6b32;font-weight:900;}
.popup p{font-weight:bold;}
.cart-box{position:fixed;bottom:0;left:0;right:0;background:#ffffff;padding:15px;border-top:3px solid #0f6b32;box-shadow:0 -4px 12px rgba(0,0,0,0.1);max-height:55%;overflow-y:auto;z-index:900;}
.cart-item{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #ddd;padding:8px 0;font-size:14px;}
.cart-item b{color:#0f6b32;}
.cart-actions button{background:#137f3b;color:#fff;border:none;padding:4px 8px;margin:0 2px;border-radius:6px;cursor:pointer;font-weight:bold;}
.cart-actions button.delete{background:#e53935;}
.cart-total{font-size:18px;font-weight:bold;color:#0f6b32;margin-top:10px;text-align:right;}
.checkout{background:#f4b400;color:#000;padding:12px;width:100%;border:none;margin-top:10px;border-radius:10px;font-size:16px;font-weight:bold;box-shadow:0 3px 7px rgba(0,0,0,0.15);cursor:pointer;}
.spacer{height:280px;}
</style>
</head>
<body>
<header class="main-header">
    <h1>ORDER ELRAH EXCLUSIVE<br>DE7SHOP VOUCHER</h1>
    <p>Beli Dengan Harga Jimat</p>
</header>

<main>
    <!-- PRODUK AUTO DARI data.js -->
    <div id="productList"></div>

    <!-- Customer Info -->
    <section class="card customer-info">
        <h3>Maklumat Pelanggan</h3>
        <label for="nama">Nama Anda:</label>
        <input type="text" id="nama" placeholder="Contoh: Ahmad Albab">

        <label for="telefon">No Telefon:</label>
        <input type="tel" id="telefon" placeholder="Contoh: 0123456789">

        <label for="alamat">Alamat / Nota Tambahan:</label>
        <input type="text" id="alamat" placeholder="Alamat penuh untuk penghantaran...">

        <h3 style="margin-top:25px; margin-bottom: 5px;">Kod Voucher</h3>
        <label for="voucher">Masukkan kod jika ada:</label>
        <input type="text" id="voucher" placeholder="Contoh: RAYA2026">
    </section>
</main>

<div class="spacer"></div>

<div class="cart-box">
    <div id="cartList"></div>
    <div class="cart-total">Total: <b>RM<span id="total">0</span></b></div>
    <button class="checkout" onclick="hantarWhatsApp()">Hantar Order WhatsApp</button>
</div>

<div class="popup" id="popup">
    <h3 id="popupTitle"></h3>
    <p id="popupMsg"></p>
</div>

<!-- DATA PRODUK -->
<script src="data.js"></script>

<script>
// ===== GLOBAL =====
let cart = [];
const senaraiVoucher = {
    "DE7SHOP7%": "Anda Layak Menerima Diskaun 7% Untuk Pembelian Anda!",
    "DE7SHOP15": "Voucher Jualan 15 pelanggan pertama diterima! Diskaun RM15.",
    "FREESHIP": "Voucher Penghantaran Percuma diterima.",
    "NEWUSER5": "Diskaun 5% untuk pelanggan baru."
};

// ===== RENDER PRODUK DARI data.js =====
function renderProduk(){
    const productList = document.getElementById("productList");
    Object.entries(PRODUK).forEach(([kod, p]) => {
        const section = document.createElement("section");
        section.className = "card product";
        section.innerHTML = `
            <h3>${p.nama}</h3>
            <p>Harga: <b>RM${p.harga}</b></p>
            <label>Warna Pilihan</label>
            <select id="w-${kod}">${p.warna.map(w=>`<option>${w}</option>`).join("")}</select>
            <label>Saiz</label>
            <select id="s-${kod}">${p.saiz.map(s=>`<option>${s}</option>`).join("")}</select>
            <label>Kuantiti</label>
            <select id="q-${kod}">
                <option>1</option><option>2</option><option>3</option>
            </select>
            <button class="btn-add" onclick="addProduk('${kod}')">Add to Cart</button>
        `;
        productList.appendChild(section);
    });
}

// ===== TAMBAH PRODUK KE CART =====
function addProduk(kod){
    const p = PRODUK[kod];
    const colorId = `w-${kod}`;
    const sizeId = `s-${kod}`;
    const qtyId = `q-${kod}`;
    const color = document.getElementById(colorId).value;
    const size = document.getElementById(sizeId).value;
    const qty = parseInt(document.getElementById(qtyId).value);

    if(!color){ showPopup("Sila Pilih Warna","Sila pilih warna baju sebelum menambah ke cart."); return; }

    const existing = cart.find(i=>i.kod===kod && i.color===color && i.size===size);
    if(existing){ existing.qty += qty; }
    else{ cart.push({kod, name:p.nama, price:p.harga, color, size, qty}); }

    updateCart();
    showPopup("Berjaya!",`${p.nama} (${color}, Saiz ${size}) telah dimasukkan ke dalam cart.`);
}

// ===== UPDATE CART =====
function updateCart(){
    const list = document.getElementById("cartList");
    list.innerHTML = "";
    let total = 0;
    if(cart.length===0){
        list.innerHTML = "<p style='text-align:center; color:#666;'>Cart anda kosong.</p>";
    }
    cart.forEach((item,i)=>{
        const itemTotal = item.price*item.qty;
        total += itemTotal;
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
            <div>${item.name}<br><small>${item.color}, ${item.size}</small><br><b>RM${itemTotal}</b></div>
            <div class="cart-actions">
                <button onclick="changeQty(${i}, -1)">-</button>
                <span>${item.qty}</span>
                <button onclick="changeQty(${i}, 1)">+</button>
                <button class="delete" onclick="deleteItem(${i})" title="Buang item">X</button>
            </div>
        `;
        list.appendChild(div);
    });
    document.getElementById("total").innerText = total;
}

// ===== CART ACTIONS =====
function changeQty(index, delta){ cart[index].qty += delta; if(cart[index].qty<=0) cart.splice(index,1); updateCart(); }
function deleteItem(index){ cart.splice(index,1); updateCart(); }

// ===== POPUP =====
function showPopup(title,msg){
    const p = document.getElementById("popup");
    document.getElementById("popupTitle").innerText = title;
    document.getElementById("popupMsg").innerText = msg;
    p.classList.add("show");
    setTimeout(()=>p.classList.remove("show"),3000);
}

// ===== HANTAR WHATSAPP =====
function hantarWhatsApp(){
    const nama = document.getElementById("nama").value.trim();
    const telefon = document.getElementById("telefon").value.trim();
    const alamat = document.getElementById("alamat").value.trim();
    const voucherInput = document.getElementById("voucher").value.trim().toUpperCase();

    if(cart.length===0){ showPopup("Cart Kosong!","Sila pilih sekurang-kurangnya satu produk."); return; }
    if(!nama || !telefon){ showPopup("Maklumat Tidak Lengkap!","Sila isi Nama dan No Telefon anda."); return; }

    let voucherText="", discountAmount=0;
    if(voucherInput!==""){
        if(senaraiVoucher.hasOwnProperty(voucherInput)){
            const mesejVoucher = senaraiVoucher[voucherInput];
            voucherText = `\n--------------------\n*VOUCHER SAH (${voucherInput}):*\nâœ… ${mesejVoucher}\n--------------------`;
            if(voucherInput==="RAYA2026") discountAmount=10;
        } else {
            showPopup("Voucher Tidak Sah",`Kod '${voucherInput}' tidak ditemui atau telah tamat tempoh.`);
            voucherText = `\n--------------------\n*STATUS VOUCHER:*\nâŒ Kod '${voucherInput}' dimasukkan tetapi tidak sah.\n--------------------`;
        }
    }

    let msg = `Assalamualaikum DE7SHOP, saya nak buat tempahan *BAJU RAYA ELRAH EXCLUSIVE 2026*.\n\n`;
    msg += `*BUTIRAN PELANGGAN:*\n`;
    msg += `ðŸ‘¤ Nama: ${nama}\n`;
    msg += `ðŸ“± No Telefon: ${telefon}\n`;
    msg += `ðŸ“ Alamat/Nota: ${alamat||"-"}\n\n`;
    msg += `*SENARAI TEMPAHAN:*\n`;

    let totalPrice = 0, totalItems=0;
    cart.forEach((item,i)=>{
        const sum = item.price*item.qty;
        totalPrice += sum;
        totalItems += item.qty;
        msg += `${i+1}. ${item.name}\n   - Warna: ${item.color}\n   - Saiz: ${item.size}\n   - Kuantiti: ${item.qty} unit (RM${sum})\n`;
    });

    const shippingCost = totalItems > 0 ? 10 + ((totalItems-1)*3) : 0;
    const payable = totalPrice - discountAmount + shippingCost;

    msg += `\n*Harga Asal: RM${totalPrice}*\n*Diskaun: RM${discountAmount}*\n*Kos Pos: RM${shippingCost}*\n*Harga Perlu Bayar: RM${payable}*`;
    msg += voucherText;
    msg += `\n\nTerima kasih! ðŸ˜Š`;

    const nomborWhatsAppAnda = "60133876000"; // tukar nombor WhatsApp anda
    const url = "https://wa.me/"+nomborWhatsAppAnda+"?text="+encodeURIComponent(msg);
    window.open(url,"_blank");
}

// ===== INIT =====
document.addEventListener("DOMContentLoaded", renderProduk);
updateCart();

</script>

</body>
</html>
